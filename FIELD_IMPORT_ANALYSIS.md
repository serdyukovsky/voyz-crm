# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã: –ø–æ–ª—è –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ —Å–¥–µ–ª–æ–∫

## üîç –°–∏–º–ø—Ç–æ–º—ã

- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ —Å–¥–µ–ª–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ ID (number) –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è  
- ‚úÖ –°–¥–µ–ª–∫–∞ –≤—Å—Ç–∞–µ—Ç –Ω–∞ –Ω—É–∂–Ω—ã–π —ç—Ç–∞–ø –≤ –≤–æ—Ä–æ–Ω–∫–µ
- ‚ùå **–ü–æ–ª—è (amount, budget, description, tags –∏ —Ç.–¥.) –ù–ï –ø–æ—è–≤–ª—è—é—Ç—Å—è**

## üìä –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### 1. –§—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Üí –ë—ç–∫–µ–Ω–¥

**–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:**
```typescript
{
  rows: [
    {"Deal Title": "–°–¥–µ–ª–∫–∞ 1", "Amount": "1000", "Budget": "500", ...},
    // ...
  ],
  mapping: {
    "title": "Deal Title",      // {crmField: csvColumn}
    "amount": "Amount",
    "budget": "Budget",
    // ...
  },
  pipelineId: "..."
}
```

**–í–∞–∂–Ω–æ:** mapping —É–∂–µ –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (invertedMapping)

### 2. –ë—ç–∫–µ–Ω–¥: mapDealRow

**–§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç:**
- `csvRow`: `{"Deal Title": "–°–¥–µ–ª–∫–∞ 1", "Amount": "1000", ...}`
- `mapping`: `{title: "Deal Title", amount: "Amount", ...}`

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª–µ–π:**
```typescript
amount: getValue(mapping.amount) || null
// getValue("Amount") -> csvRow["Amount"] -> "1000"
```

**–ü—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–¥–µ—Å—å:**
- –ï—Å–ª–∏ `mapping.amount` = `undefined` ‚Üí `getValue(undefined)` ‚Üí `undefined` ‚Üí `undefined || null` ‚Üí `null`
- –ï—Å–ª–∏ `csvRow["Amount"]` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Üí `getValue("Amount")` ‚Üí `undefined` ‚Üí `null`

### 3. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã

#### –ü—Ä–∏—á–∏–Ω–∞ 1: –ú–∞–ø–ø–∏–Ω–≥ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω—É–∂–Ω—ã—Ö –ø–æ–ª–µ–π

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–ø–æ—Å—Ç–∞–≤–∏–ª —Ç–æ–ª—å–∫–æ `title`, `number`, `stageId`, –Ω–æ –Ω–µ —Å–æ–ø–æ—Å—Ç–∞–≤–∏–ª `amount`, `budget`, `description` –∏ —Ç.–¥.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```javascript
console.log('[IMPORT MAPPING]', {
  allMappedFields: Object.keys(invertedMapping),
  // –î–æ–ª–∂–Ω—ã –±—ã—Ç—å: ['title', 'number', 'stageId', 'amount', 'budget', ...]
})
```

**–ï—Å–ª–∏ –≤ `allMappedFields` –Ω–µ—Ç –Ω—É–∂–Ω—ã—Ö –ø–æ–ª–µ–π** ‚Üí –æ–Ω–∏ –Ω–µ –±—É–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã.

#### –ü—Ä–∏—á–∏–Ω–∞ 2: –ò–º–µ–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫ –≤ CSV –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –º–∞–ø–ø–∏–Ω–≥–æ–º

**–°—Ü–µ–Ω–∞—Ä–∏–π:** 
- CSV —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–ª–æ–Ω–∫—É `"–°—É–º–º–∞"` 
- –ú–∞–ø–ø–∏–Ω–≥ —É–∫–∞–∑—ã–≤–∞–µ—Ç `amount: "Amount"` (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º)
- `csvRow["Amount"]` = `undefined` ‚Üí –ø–æ–ª–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```javascript
console.log('[IMPORT MAPPING]', {
  firstRowSample: rows[0] ? Object.keys(rows[0]).slice(0, 5) : []
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫ –≤ CSV
})
```

**–ï—Å–ª–∏ –∏–º–µ–Ω–∞ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç** ‚Üí `getValue()` –≤–µ—Ä–Ω–µ—Ç `undefined`.

#### –ü—Ä–∏—á–∏–Ω–∞ 3: –ó–Ω–∞—á–µ–Ω–∏—è –ø—É—Å—Ç—ã–µ –∏–ª–∏ undefined

**–°—Ü–µ–Ω–∞—Ä–∏–π:** 
- –ú–∞–ø–ø–∏–Ω–≥ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –ö–æ–ª–æ–Ω–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ù–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—É—Å—Ç–æ–µ: `csvRow["Amount"] = ""` –∏–ª–∏ `undefined`

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ getValue:**
```typescript
const stringValue = typeof value === 'string' ? value : String(value);
return stringValue.trim() || undefined;  // –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Üí undefined
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `undefined || null` ‚Üí `null` ‚Üí –ø–æ–ª–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

#### –ü—Ä–∏—á–∏–Ω–∞ 4: –ü–æ–ª—è —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ dealToCreate

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –í –∫–æ–¥–µ actual import (—Å—Ç—Ä–æ–∫–∞ 1566-1581) —Å–æ–∑–¥–∞–µ—Ç—Å—è `dealToCreate`:

```typescript
const dealToCreate = {
  number: row.number || ...,
  title: row.title,
  amount: row.amount !== undefined ? row.amount : null,  // ‚ö†Ô∏è
  budget: row.budget !== undefined ? row.budget : null,  // ‚ö†Ô∏è
  // ...
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ `row.amount = null` (–∏–∑ mapDealRow), —Ç–æ:
- `row.amount !== undefined` ‚Üí `true`
- `row.amount` ‚Üí `null`
- –ü–æ–ª–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–∞–∫ `null`

**–ù–æ –≤ batchCreateDeals:**
```typescript
const amountValue = row.amount !== undefined && row.amount !== null 
  ? Number(row.amount) 
  : null;
```

–ï—Å–ª–∏ `amount = null`, —Ç–æ `amountValue = null`, –∏ –ø–æ–ª–µ –º–æ–∂–µ—Ç –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –ë–î.

## üîé –ì–¥–µ –∏—Å–∫–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```javascript
[IMPORT MAPPING] {
  allMappedFields: ['title', 'number', 'stageId', 'amount', 'budget', ...]
}
```

**–ï—Å–ª–∏ –Ω—É–∂–Ω—ã—Ö –ø–æ–ª–µ–π –Ω–µ—Ç** ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ –º–∞–ø–ø–∏–Ω–≥–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ.

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ CSV

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
```javascript
[IMPORT MAPPING] {
  firstRowSample: ['Deal Title', 'Amount', 'Budget', ...]
}
```

**–ï—Å–ª–∏ –∏–º–µ–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –º–∞–ø–ø–∏–Ω–≥–æ–º** ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∏–º–µ–Ω–∞—Ö –∫–æ–ª–æ–Ω–æ–∫.

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç mapDealRow

–í –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```javascript
[MAP DEAL ROW RESULT] Row 1: {
  amount: "1000" –∏–ª–∏ null,
  budget: "500" –∏–ª–∏ null,
  description: "..." –∏–ª–∏ null,
  // ...
}
```

**–ï—Å–ª–∏ –ø–æ–ª—è = null** ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ mapDealRow (–º–∞–ø–ø–∏–Ω–≥ –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ).

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å dealToCreate

–í –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞:
```javascript
[IMPORT DEAL DATA] Row 1 deal data: {
  amount: "1000" –∏–ª–∏ null,
  budget: "500" –∏–ª–∏ null,
  // ...
}
```

**–ï—Å–ª–∏ –ø–æ–ª—è = null –∑–¥–µ—Å—å** ‚Üí –æ–Ω–∏ –±—ã–ª–∏ null —É–∂–µ –≤ mapDealRow.

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å batchCreateDeals

–í –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞:
```javascript
[BATCH CREATE DEAL DATA] Row 1: {
  amount: 1000 –∏–ª–∏ null,
  budget: 500 –∏–ª–∏ null,
  // ...
}
```

**–ï—Å–ª–∏ –ø–æ–ª—è = null –∑–¥–µ—Å—å** ‚Üí –æ–Ω–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î.

## üéØ –ù–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

### –ü—Ä–∏—á–∏–Ω–∞ 1: –ú–∞–ø–ø–∏–Ω–≥ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–ù–ê–ò–ë–û–õ–ï–ï –í–ï–†–û–Ø–¢–ù–û)
**–°—Ü–µ–Ω–∞—Ä–∏–π:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–ø–æ—Å—Ç–∞–≤–∏–ª —Ç–æ–ª—å–∫–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (`title`, `number`, `stageId`), –Ω–æ –Ω–µ —Å–æ–ø–æ—Å—Ç–∞–≤–∏–ª –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (`amount`, `budget`, `description`, `tags` –∏ —Ç.–¥.)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```javascript
[IMPORT MAPPING] {
  allMappedFields: ['title', 'number', 'stageId', 'amount', 'budget', ...]
}
```

**–ï—Å–ª–∏ –≤ `allMappedFields` –Ω–µ—Ç `amount`, `budget`, `description` –∏ —Ç.–¥.** ‚Üí —ç—Ç–∏ –ø–æ–ª—è –Ω–µ –±—É–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- `mapping.amount = undefined` ‚Üí `getValue(undefined)` ‚Üí `undefined` ‚Üí `null`
- –ü–æ–ª–µ –Ω–µ –ø–æ–ø–∞–¥–µ—Ç –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç `mapDealRow`

### –ü—Ä–∏—á–∏–Ω–∞ 2: –ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∏–º–µ–Ω –∫–æ–ª–æ–Ω–æ–∫ –≤ CSV
**–°—Ü–µ–Ω–∞—Ä–∏–π:** 
- CSV —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–ª–æ–Ω–∫—É `"–°—É–º–º–∞"` (–Ω–∞ —Ä—É—Å—Å–∫–æ–º)
- –ú–∞–ø–ø–∏–Ω–≥ —É–∫–∞–∑—ã–≤–∞–µ—Ç `amount: "Amount"` (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º)
- `csvRow["Amount"]` = `undefined` ‚Üí –ø–æ–ª–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
```javascript
[IMPORT MAPPING] {
  firstRowSample: ['Deal Title', 'Amount', 'Budget', ...]  // –†–µ–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫
}
```

**–ï—Å–ª–∏ –∏–º–µ–Ω–∞ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç** ‚Üí `getValue()` –≤–µ—Ä–Ω–µ—Ç `undefined`.

### –ü—Ä–∏—á–∏–Ω–∞ 3: –ü—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ CSV
**–°—Ü–µ–Ω–∞—Ä–∏–π:** 
- –ú–∞–ø–ø–∏–Ω–≥ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –ö–æ–ª–æ–Ω–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ù–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—É—Å—Ç–æ–µ: `csvRow["Amount"] = ""`

**–û–±—Ä–∞–±–æ—Ç–∫–∞:**
```typescript
return stringValue.trim() || undefined;  // "" ‚Üí undefined
amount: getValue(mapping.amount) || null  // undefined || null ‚Üí null
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–µ –±—É–¥–µ—Ç `null` –∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è.

### –ü—Ä–∏—á–∏–Ω–∞ 4: –ü—Ä–æ–±–ª–µ–º–∞ —Å amount –≤ batchCreateDeals (–û–°–û–ë–´–ô –°–õ–£–ß–ê–ô)

**–í–∞–∂–Ω–æ:** `amount` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Å–æ–±—ã–º –æ–±—Ä–∞–∑–æ–º –∏–∑-–∑–∞ Prisma —Å—Ö–µ–º—ã (`@default(0)`):

```typescript
// amount –ù–ï –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ baseDealData!
const baseDealData = {
  title: row.title,
  budget: budgetValue,  // ‚úÖ budget –≤–∫–ª—é—á–µ–Ω
  // amount –ù–ï–¢ –∑–¥–µ—Å—å! ‚ùå
  description: row.description || null,  // ‚úÖ description –≤–∫–ª—é—á–µ–Ω
  // ...
};

// amount –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:
toCreate.push({
  ...baseDealData,
  amount: amountValue !== null ? amountValue : 0,  // amount –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
});
```

**–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
```typescript
if (amountValue !== null && !isNaN(Number(amountValue))) {
  updateData.amount = Number(amountValue);  // amount –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ null
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ `amount = null` –∏–∑ `mapDealRow`, —Ç–æ:
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `0` (–¥–µ—Ñ–æ–ª—Ç)
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏: `amount` –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ `updateData` ‚Üí –ø–æ–ª–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**–ù–û:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è `amount`. –ü—Ä–æ–±–ª–µ–º–∞ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –≤ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—è—Ö (`budget`, `description`, `tags`).

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

–ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –∏ –Ω–∞–π–¥–∏—Ç–µ:
```javascript
[IMPORT MAPPING] {
  allMappedFields: ['title', 'number', 'stageId', ...]
}
```

**–í–æ–ø—Ä–æ—Å:** –ï—Å—Ç—å –ª–∏ –≤ `allMappedFields` –ø–æ–ª—è `amount`, `budget`, `description`, `tags`?

- **–ù–ï–¢** ‚Üí –ü—Ä–æ–±–ª–µ–º–∞: –ø–æ–ª—è –Ω–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–∞ —ç—Ç–∞–ø–µ –º–∞–ø–ø–∏–Ω–≥–∞
- **–î–ê** ‚Üí –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —à–∞–≥—É 2

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–µ–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫ CSV

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
```javascript
[IMPORT MAPPING] {
  firstRowSample: ['Deal Title', 'Amount', 'Budget', ...]
}
```

**–í–æ–ø—Ä–æ—Å:** –°–æ–≤–ø–∞–¥–∞—é—Ç –ª–∏ –∏–º–µ–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫ —Å –º–∞–ø–ø–∏–Ω–≥–æ–º?

- **–ù–ï–¢** ‚Üí –ü—Ä–æ–±–ª–µ–º–∞: –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∏–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `"–°—É–º–º–∞"` vs `"Amount"`)
- **–î–ê** ‚Üí –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —à–∞–≥—É 3

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

–í –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞ (`tail -f /tmp/backend-run.log`) –Ω–∞–π–¥–∏—Ç–µ:
```javascript
[MAP DEAL ROW RESULT] Row 1: {
  amount: "1000" –∏–ª–∏ null,
  budget: "500" –∏–ª–∏ null,
  description: "..." –∏–ª–∏ null,
  tags: [...] –∏–ª–∏ undefined
}
```

**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —É –ø–æ–ª–µ–π?

- **null/undefined** ‚Üí –ü—Ä–æ–±–ª–µ–º–∞ –≤ –º–∞–ø–ø–∏–Ω–≥–µ –∏–ª–∏ –¥–∞–Ω–Ω—ã—Ö CSV
- **–ï—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è** ‚Üí –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —à–∞–≥—É 4

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å dealToCreate

–í –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞:
```javascript
[IMPORT DEAL DATA] Row 1 deal data: {
  amount: "1000" –∏–ª–∏ null,
  budget: "500" –∏–ª–∏ null,
  description: "..." –∏–ª–∏ null
}
```

**–í–æ–ø—Ä–æ—Å:** –°–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å –ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ mapDealRow?

- **–ù–ï–¢ (—Å—Ç–∞–ª–∏ null)** ‚Üí –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ dealToCreate
- **–î–ê** ‚Üí –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —à–∞–≥—É 5

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å batchCreateDeals

–í –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞:
```javascript
[BATCH CREATE DEAL DATA] Row 1: {
  amount: 1000 –∏–ª–∏ null,
  budget: 500 –∏–ª–∏ null,
  description: "..." –∏–ª–∏ null
}
```

**–í–æ–ø—Ä–æ—Å:** –°–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å –ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è?

- **–ù–ï–¢ (—Å—Ç–∞–ª–∏ null)** ‚Üí –ü—Ä–æ–±–ª–µ–º–∞ –≤ batchCreateDeals
- **–î–ê** ‚Üí –ü—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ Prisma –∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤ –ë–î

## üîç –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –º–æ–º–µ–Ω—Ç

**–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∫—É 404-421 –≤ `import-batch.service.ts`:**

```typescript
const baseDealData = {
  title: row.title,
  budget: budgetValue,  // ‚úÖ –í–∫–ª—é—á–µ–Ω
  // amount –ù–ï–¢! ‚ùå
  description: row.description || null,  // ‚úÖ –í–∫–ª—é—á–µ–Ω
  tags: row.tags || [],  // ‚úÖ –í–∫–ª—é—á–µ–Ω
  // ...
};
```

**–í—Å–µ –ø–æ–ª—è –∫—Ä–æ–º–µ `amount` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ `baseDealData`.** –ï—Å–ª–∏ –æ–Ω–∏ —Ç–∞–º –µ—Å—Ç—å, –Ω–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î, –ø—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤:
1. Prisma –∑–∞–ø—Ä–æ—Å–µ (–ø–æ–ª–µ –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è)
2. –í–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î
3. –¢–∏–ø–∞—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, Decimal –¥–ª—è amount/budget)

