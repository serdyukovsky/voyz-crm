# üîß –ü—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ - –°–∫–æ–ø–∏—Ä—É–π –∏ –≤—Å—Ç–∞–≤—å –∫–æ–º–∞–Ω–¥—ã

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞

**Login –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ `admin@example.com / admin123` –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç.

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç:
- –õ–∏–±–æ –∞–¥–º–∏–Ω –Ω–µ —Å–æ–∑–¥–∞–Ω –Ω–∞ dev —Å–µ—Ä–≤–µ—Ä–µ
- –õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–æ–π –ø–∞—Ä–æ–ª—å

## ‚úÖ –†–µ—à–µ–Ω–∏–µ (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤–æ–µ –æ–∫–Ω–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

–ù–∞–∂–º–∏—Ç–µ `Cmd + T` –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É Terminal

### –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É:

```bash
ssh root@91.210.106.218
```

**–ï—Å–ª–∏ –ø—Ä–æ—Å–∏—Ç –ø–∞—Ä–æ–ª—å SSH –∫–ª—é—á–∞** - –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à passphrase –¥–ª—è `/Users/kosta/.ssh/id_ed25519`

**–ï—Å–ª–∏ –ø—Ä–æ—Å–∏—Ç –ø–∞—Ä–æ–ª—å root** - –≤–≤–µ–¥–∏—Ç–µ: `5nlT3rry_4`

### –®–∞–≥ 3: –ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–∞–∂–¥—É—é –∫–æ–º–∞–Ω–¥—É –∏ –Ω–∞–∂–∏–º–∞–π—Ç–µ Enter:

```bash
cd /root/crm-backend-dev
```

```bash
echo "=== Checking migration status ==="
npx prisma migrate status | tail -15
```

**–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã–≤–æ–¥:**
- –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å `20260202172654_add_deal_link_field`
- –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `Applied` (–∑–µ–ª–µ–Ω—ã–π) –∏–ª–∏ `Pending` (–∂–µ–ª—Ç—ã–π)

```bash
echo "=== Applying migrations ==="
npx prisma migrate deploy
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Applying migration `20260202172654_add_deal_link_field`
Applied migration `20260202172654_add_deal_link_field` in XXms
```

–ò–ª–∏:
```
No pending migrations
```

```bash
echo "=== Creating/resetting admin user ==="
npm run create:admin
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Admin user created successfully
Email: admin@example.com
Password: admin123
```

–ò–ª–∏:
```
User already exists, password reset to: admin123
```

```bash
echo "=== Restarting backend ==="
pm2 restart crm-backend-dev
```

```bash
echo "=== Checking backend health ==="
sleep 3
curl -s http://localhost:3001/api/health
```

**–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:**
```json
{"status":"ok","timestamp":"..."}
```

```bash
echo "=== Checking logs for errors ==="
pm2 logs crm-backend-dev --lines 30 --nostream
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–≤–æ–¥:**
- ‚ùå –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –∫—Ä–∞—Å–Ω—ã–µ ERROR - —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏—Ö
- ‚úÖ –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ "Application is running" - –≤—Å—ë —Ö–æ—Ä–æ—à–æ

```bash
exit
```

---

## üß™ –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä—É–µ–º –ª–æ–∫–∞–ª—å–Ω–æ

–í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ –æ–∫–Ω–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd "/Users/kosta/Documents/VOYZ/CRM Development"
node test-api-detailed.js
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Test 1: Login...
  ‚úÖ Login successful with admin@example.com
```

–ï—Å–ª–∏ –≤—Å–µ —Ç–µ—Å—Ç—ã ‚úÖ - –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ:

```bash
cd CRM
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:5173

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –í–æ–π–¥–∏—Ç–µ: `admin@example.com` / `admin123`
2. –û—Ç–∫—Ä–æ–π—Ç–µ `/tasks` - –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
3. –û—Ç–∫—Ä–æ–π—Ç–µ `/deals` - –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∏—Å–∫

---

## üîç –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: SSH –∫–ª—é—á —Ç—Ä–µ–±—É–µ—Ç passphrase

**–°–∏–º–ø—Ç–æ–º:** –ü—Ä–æ—Å–∏—Ç "Enter passphrase for key"

**–†–µ—à–µ–Ω–∏–µ 1:** –í–≤–µ–¥–∏—Ç–µ –≤–∞—à passphrase (–ø–∞—Ä–æ–ª—å –æ—Ç SSH –∫–ª—é—á–∞)

**–†–µ—à–µ–Ω–∏–µ 2:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª—å –≤–º–µ—Å—Ç–æ –∫–ª—é—á–∞:
```bash
ssh -o PreferredAuthentications=password root@91.210.106.218
# –í–≤–µ–¥–∏—Ç–µ: 5nlT3rry_4
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Permission denied"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
ssh-add ~/.ssh/id_ed25519
# –í–≤–µ–¥–∏—Ç–µ passphrase –æ–¥–∏–Ω —Ä–∞–∑
# –ó–∞—Ç–µ–º —Å–Ω–æ–≤–∞: ssh root@91.210.106.218
```

### –ü—Ä–æ–±–ª–µ–º–∞: Migration fails

**–°–∏–º–ø—Ç–æ–º:** –û—à–∏–±–∫–∞ –ø—Ä–∏ `npx prisma migrate deploy`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ –æ—à–∏–±–∫–∏
npx prisma migrate deploy 2>&1 | tee /tmp/migration-error.log

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
npx prisma db pull
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫—É** –∏ –ø—Ä–∏—à–ª–∏—Ç–µ –º–Ω–µ.

### –ü—Ä–æ–±–ª–µ–º–∞: Admin creation fails

**–°–∏–º–ø—Ç–æ–º:** `npm run create:admin` –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–∫—É

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ –∞–¥–º–∏–Ω–∞ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Prisma Studio:

```bash
cd /root/crm-backend-dev
npx prisma studio
```

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–±—É–¥–µ—Ç URL —Ç–∏–ø–∞ http://localhost:5555)

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ç–∞–±–ª–∏—Ü—É `User`
2. –ù–∞–∂–º–∏—Ç–µ "Add record"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - email: `admin@example.com`
   - password: `$2a$10$YourHashedPassword` (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ bcrypt hash)
   - name: `Admin`
   - role: `ADMIN`
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

**–ü—Ä–æ—â–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Ö–µ—à –¥–ª—è `admin123`:
```
$2a$10$N9qo8uLOickgx2ZMRZoMye7JNUwOJU8cYqVX6XzNf9SBjRrHPHWaK
```

### –ü—Ä–æ–±–ª–µ–º–∞: Backend –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç

**–°–∏–º–ø—Ç–æ–º:** PM2 –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `errored` –∏–ª–∏ `stopped`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
pm2 logs crm-backend-dev --lines 100
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –æ—à–∏–±–∫–∏

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–µ—Å—Ç–∞—Ä—Ç
pm2 delete crm-backend-dev
cd /root/crm-backend-dev
pm2 start npm --name crm-backend-dev -- run start:dev

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
pm2 status
pm2 logs crm-backend-dev
```

---

## üìã –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫–ª–∏—Å—Ç

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ –ø–æ—Ä—è–¥–∫—É –∏ –æ—Ç–º–µ—á–∞–π—Ç–µ:

- [ ] SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] `npx prisma migrate deploy` - —É—Å–ø–µ—à–Ω–æ
- [ ] `npm run create:admin` - —É—Å–ø–µ—à–Ω–æ
- [ ] `pm2 restart crm-backend-dev` - —É—Å–ø–µ—à–Ω–æ
- [ ] `curl http://localhost:3001/api/health` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{"status":"ok"}`
- [ ] `pm2 logs` - –Ω–µ—Ç –∫—Ä–∞—Å–Ω—ã—Ö –æ—à–∏–±–æ–∫
- [ ] `node test-api-detailed.js` - login —É—Å–ø–µ—à–µ–Ω
- [ ] Frontend –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è: `npm run dev`
- [ ] Login —Ä–∞–±–æ—Ç–∞–µ—Ç: admin@example.com / admin123
- [ ] Tasks page –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] Search —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ VSCode Remote SSH

–ï—Å–ª–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:

1. –û—Ç–∫—Ä–æ–π—Ç–µ VSCode
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ "Remote - SSH"
3. –ù–∞–∂–º–∏—Ç–µ F1 ‚Üí "Remote-SSH: Connect to Host"
4. –í–≤–µ–¥–∏—Ç–µ: `root@91.210.106.218`
5. –í–≤–µ–¥–∏—Ç–µ passphrase/–ø–∞—Ä–æ–ª—å
6. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ VSCode (Ctrl + `)
7. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –∏–∑ –®–∞–≥–∞ 3

---

## üÜò –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è:

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥** (–æ—Å–æ–±–µ–Ω–Ω–æ –æ—à–∏–±–∫–∏)
2. **–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç** (–µ—Å–ª–∏ –ø—Ä–æ—â–µ)
3. **–ü—Ä–∏—à–ª–∏—Ç–µ –º–Ω–µ** - —Ä–∞–∑–±–µ—Ä–µ–º—Å—è –≤–º–µ—Å—Ç–µ

–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
pm2 status
pm2 logs crm-backend-dev --lines 50
npx prisma migrate status
curl http://localhost:3001/api/health

# –õ–æ–∫–∞–ª—å–Ω–æ
node test-api-detailed.js
curl http://91.210.106.218:3001/api/health
```

---

**TL;DR:**
1. SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. `npx prisma migrate deploy`
3. `npm run create:admin`
4. `pm2 restart crm-backend-dev`
5. –ì–æ—Ç–æ–≤–æ!
