# –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ —Ñ–∞–π–ª–∞–º - Docker Setup

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `Dockerfile.dev`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π Dockerfile –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å hot-reload

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑: `node:20-alpine` (–ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π)
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ `npm ci`
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client
- Hot-reload —á–µ—Ä–µ–∑ `npm run start:dev` (nest start --watch)

**–†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞:** ~200-300MB (alpine)

### 2. `docker-compose.dev.yml`
**–û–ø–∏—Å–∞–Ω–∏–µ:** Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–°–µ—Ä–≤–∏—Å—ã:**
- **postgres**: PostgreSQL 15-alpine
  - –ü–æ—Ä—Ç: 5432
  - Volume: `postgres_data_dev`
  - Healthcheck –Ω–∞—Å—Ç—Ä–æ–µ–Ω

- **backend**: NestJS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  - –ü–æ—Ä—Ç: 3001
  - Hot-reload —á–µ—Ä–µ–∑ volume mounts
  - –ó–∞–≤–∏—Å–∏—Ç –æ—Ç postgres (–∂–¥–µ—Ç healthcheck)

**Volumes –¥–ª—è hot-reload:**
```yaml
- ./src:/app/src              # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
- ./prisma:/app/prisma        # Prisma —Å—Ö–µ–º—ã
- ./package.json:/app/package.json
- ./tsconfig.json:/app/tsconfig.json
- ./nest-cli.json:/app/nest-cli.json
- /app/node_modules           # –ò—Å–∫–ª—é—á–µ–Ω (–∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
- /app/dist                   # –ò—Å–∫–ª—é—á–µ–Ω (–∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
```

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
- –ß–∏—Ç–∞—é—Ç—Å—è –∏–∑ `.env` —Ñ–∞–π–ª–∞
- –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ docker-compose.dev.yml
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### 3. `.env.example`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- Database –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- JWT —Å–µ–∫—Ä–µ—Ç—ã
- Server –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- SMTP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 4. `.dockerignore`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –§–∞–π–ª—ã, –∏—Å–∫–ª—é—á–∞–µ–º—ã–µ –∏–∑ Docker –æ–±—Ä–∞–∑–∞

**–ò—Å–∫–ª—é—á–∞–µ—Ç:**
- node_modules
- dist
- .git
- .env —Ñ–∞–π–ª—ã
- –õ–æ–≥–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (–∫—Ä–æ–º–µ README.md)

### 5. `DOCKER_SETUP.md`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### 6. `DOCKER_QUICK_START.md`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞

## üîß –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### Hot Reload
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `nest start --watch` –∏–∑ NestJS CLI
- Volume mounts –¥–ª—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ –≤ `src/`

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ `.env`
- –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ docker-compose.dev.yml
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: `.env` –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –æ–±—Ä–∞–∑ (—á–µ—Ä–µ–∑ .dockerignore)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- Alpine –æ–±—Ä–∞–∑ –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
- –ú–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è —Å–±–æ—Ä–∫–∞ –Ω–µ –Ω—É–∂–Ω–∞ –¥–ª—è dev
- node_modules –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (–Ω–µ –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è)
- dist –∏—Å–∫–ª—é—á–µ–Ω –∏–∑ volume (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)

## üìã –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã

### –ó–∞–ø—É—Å–∫
```bash
docker compose -f docker-compose.dev.yml up -d --build
```

### –õ–æ–≥–∏
```bash
docker compose -f docker-compose.dev.yml logs -f backend
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
docker compose -f docker-compose.dev.yml down
```

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
```bash
# –ú–∏–≥—Ä–∞—Ü–∏–∏
docker compose -f docker-compose.dev.yml exec backend npm run prisma:migrate

# –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∞
docker compose -f docker-compose.dev.yml exec backend npm run create:admin

# Prisma Studio
docker compose -f docker-compose.dev.yml exec backend npm run prisma:studio
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ò–∑–æ–ª—è—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è** - –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
2. **Hot Reload** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. **–õ–µ–≥–∫–æ–≤–µ—Å–Ω–æ—Å—Ç—å** - Alpine –æ–±—Ä–∞–∑ ~200-300MB
4. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ–≥–æ
5. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

## üîÑ –û—Ç–ª–∏—á–∏—è –æ—Ç production

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Development | Production |
|----------|-------------|-----------|
| –û–±—Ä–∞–∑ | node:20-alpine | node:20-alpine (multi-stage) |
| –ö–æ–º–∞–Ω–¥–∞ | `npm run start:dev` | `npm run start:prod` |
| Volumes | –ú–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –¥–ª—è hot-reload | –ù–µ –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è |
| NODE_ENV | development | production |
| Source maps | –î–∞ | –ù–µ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
