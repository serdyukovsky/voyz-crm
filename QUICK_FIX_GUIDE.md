# üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü–æ–∏—Å–∫ –ø–æ —Å—Å—ã–ª–∫–µ –∏ Tasks Page

## üìä –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–°—Ç–∞—Ç—É—Å –∫–æ–¥–∞**: ‚úÖ –í–°–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –£–ñ–ï –í –ö–û–î–ï
**–ü—Ä–æ–±–ª–µ–º–∞**: ‚ö†Ô∏è –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –Ω–∞ dev —Å–µ—Ä–≤–µ—Ä–µ (91.210.106.218:3001)

---

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

```bash
cd "/Users/kosta/Documents/VOYZ/CRM Development"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â—É—é –≤–µ—Ç–∫—É
git status

# –ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
git add .
git commit -m "Apply link field migration"

# Push –≤ develop –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è
git push origin develop
```

**–ñ–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã** - webhook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏—é.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ SSH

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
ssh root@91.210.106.218
# –ü–∞—Ä–æ–ª—å: 5nlT3rry_4

# –ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
cd /root/crm-backend-dev
npx prisma migrate status
npx prisma migrate deploy
pm2 restart crm-backend-dev
exit
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ frontend –ª–æ–∫–∞–ª—å–Ω–æ

```bash
cd "/Users/kosta/Documents/VOYZ/CRM Development/CRM"
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:5173

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

#### ‚úÖ Tasks Page (–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–¥–∞—á)
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/tasks`
- –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∑–∞–¥–∞—á–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –§–∏–ª—å—Ç—Ä "All Users" –¥–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–∏—Å–∫ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å

#### ‚úÖ Search by Link (–ü–æ–∏—Å–∫ –ø–æ —Å—Å—ã–ª–∫–µ)
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É Deals
- –í –ø–æ–∏—Å–∫–µ –≤–≤–µ–¥–∏—Ç–µ —á–∞—Å—Ç—å —Å—Å—ã–ª–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `telegram` –∏–ª–∏ `google`)
- –î–æ–ª–∂–Ω—ã –Ω–∞–π—Ç–∏—Å—å —Å–¥–µ–ª–∫–∏ —Å —Ç–∞–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

–ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫—Ä–∞—Å–Ω—ã—Ö –æ—à–∏–±–æ–∫. –ï—Å–ª–∏ –µ—Å—Ç—å:
- `401 Unauthorized` ‚Üí –†–∞–∑–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å –∏ –∑–∞–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å —Å–Ω–æ–≤–∞
- `CORS error` ‚Üí –ü—Ä–æ–±–ª–µ–º–∞ —Å CORS –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- `500 Server Error` ‚Üí –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: `pm2 logs crm-backend-dev`

---

## üìã –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ

### Backend

**1. Schema.prisma** - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ link:
```prisma
model Deal {
  // ...
  link              String?
  // ...
}
```

**2. deals.service.ts** - –ø–æ–∏—Å–∫ –ø–æ link (–ª–∏–Ω–∏—è 354):
```typescript
if (filters?.search) {
  whereConditions.push({
    OR: [
      { title: { contains: filters.search, mode: 'insensitive' } },
      { description: { contains: filters.search, mode: 'insensitive' } },
      { number: { contains: filters.search, mode: 'insensitive' } },
      { link: { contains: filters.search, mode: 'insensitive' } }, // ‚Üê –ù–û–í–û–ï
      { contact: { link: { contains: filters.search, mode: 'insensitive' } } },
    ],
  });
}
```

**3. –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞**:
```
crm-backend/prisma/migrations/20260202172654_add_deal_link_field/
```

### Frontend

**1. TasksPage.tsx** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã:
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ API
- ‚úÖ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ñ–∏–ª—å—Ç—Ä = —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- ‚úÖ –£–±—Ä–∞–Ω—ã –ª–∏—à–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã (deals, contacts, statuses)
- ‚úÖ –ü–æ–∏—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —á–µ—Ä–µ–∑ SearchContext
- ‚úÖ –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ —Å–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**2. deals.ts API** - –ø–æ–∏—Å–∫ —É–∂–µ —Ä–∞–±–æ—Ç–∞–ª:
```typescript
const searchValue = params?.search || params?.title
if (searchValue) queryParams.append('search', searchValue)
```

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### Backend –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç?

```bash
curl http://91.210.106.218:3001/api/health
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: `{"status":"ok",...}`

–ï—Å–ª–∏ –Ω–µ—Ç:
```bash
ssh root@91.210.106.218
pm2 status
pm2 restart crm-backend-dev
pm2 logs crm-backend-dev --lines 50
```

### –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞?

```bash
ssh root@91.210.106.218
cd /root/crm-backend-dev
npx prisma migrate status
```

–ò—â–∏—Ç–µ –≤ –≤—ã–≤–æ–¥–µ:
```
‚úì 20260202172654_add_deal_link_field - Applied
```

–ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å `pending`:
```bash
npx prisma migrate deploy
pm2 restart crm-backend-dev
```

### Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏?

1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- **401/403** ‚Üí –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫, –ø–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å
- **CORS** ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –≤ main.ts –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **404** ‚Üí Endpoint –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–æ—É—Ç—ã
- **500** ‚Üí –û—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: `pm2 logs crm-backend-dev`

---

## üìù –ß–µ–∫–ª–∏—Å—Ç

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] Backend –æ—Ç–≤–µ—á–∞–µ—Ç: `curl http://91.210.106.218:3001/api/health`
- [ ] Frontend –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è: `npm run dev` ‚Üí http://localhost:5173
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ Tasks –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Ñ–∏–ª—å—Ç—Ä–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- [ ] –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∑–∞–¥–∞—á–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –ü–æ–∏—Å–∫ –∑–∞–¥–∞—á —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫
- [ ] –ü–æ–∏—Å–∫ –ø–æ deals –Ω–∞—Ö–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Å—Å—ã–ª–∫–∞–º
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

---

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –°–æ–±–µ—Ä–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

```bash
# –õ–æ–≥–∏ backend
ssh root@91.210.106.218 "pm2 logs crm-backend-dev --lines 100"

# –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π
ssh root@91.210.106.218 "cd /root/crm-backend-dev && npx prisma migrate status"

# –°—Ç–∞—Ç—É—Å PM2
ssh root@91.210.106.218 "pm2 status"
```

### 2. –°–∫—Ä–∏–Ω—à–æ—Ç –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

### 3. –û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É:
- –ö–∞–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?
- –ö–∞–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏?
- –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ª–æ–≥–∏ backend?

---

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–≥–æ —Å—Ä–∞–∑—É

```bash
# 1. Backend –∂–∏–≤?
curl -s http://91.210.106.218:3001/api/health && echo "‚úÖ Backend OK" || echo "‚ùå Backend DOWN"

# 2. Frontend –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è?
cd "/Users/kosta/Documents/VOYZ/CRM Development/CRM" && timeout 5 npm run dev &> /dev/null && echo "‚úÖ Frontend OK" || echo "‚ùå Frontend FAIL"

# 3. –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞? (—á–µ—Ä–µ–∑ SSH)
ssh root@91.210.106.218 "cd /root/crm-backend-dev && npx prisma migrate status | grep add_deal_link_field"
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [MANUAL_MIGRATION_GUIDE.md](./MANUAL_MIGRATION_GUIDE.md) - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- [DEPLOYMENT_WORKFLOW.md](./DEPLOYMENT_WORKFLOW.md) - –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ webhook
- Backend –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [crm-backend/README-BACKEND.md](./crm-backend/README-BACKEND.md)

---

**–ì–ª–∞–≤–Ω–æ–µ**: –ö–æ–¥ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ. –ù—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –ü—Ä–æ—â–µ –≤—Å–µ–≥–æ —á–µ—Ä–µ–∑ `git push origin develop`.
