# üöÄ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã (23 —è–Ω–≤–∞—Ä—è 2026)

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚úÖ 1. React Query –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
**–§–∞–π–ª:** `hooks/use-deals.ts`
- –û–±–Ω–æ–≤–ª–µ–Ω hook useDeals —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ API
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `staleTime: 5 * 60 * 1000` (5 –º–∏–Ω—É—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è)
- –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `enabled` –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫—ç—à (–±–µ–∑ network –∑–∞–ø—Ä–æ—Å–∞) ‚úÖ

---

### ‚úÖ 2. Debounce –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
**–§–∞–π–ª:** `lib/utils/debounce.ts` (–°–û–ó–î–ê–ù)
- –°–æ–∑–¥–∞–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ `useDebouncedValue` –¥–ª—è –¥–µ–±–∞—É–Ω—Å–∞ –∑–Ω–∞—á–µ–Ω–∏–π
- –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `debounce` –¥–ª—è –¥–µ–±–∞—É–Ω—Å–∞ —Ñ—É–Ω–∫—Ü–∏–π

**–§–∞–π–ª:** `components/crm/deals-kanban-board.tsx`
- –î–æ–±–∞–≤–ª–µ–Ω–æ: `const debouncedFilters = useDebouncedValue(filters, 500)`
- –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ - —Ç–æ–ª—å–∫–æ 1 –∑–∞–ø—Ä–æ—Å –≤–º–µ—Å—Ç–æ 10+

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–∏ –±—ã—Å—Ç—Ä–æ–º –∫–ª–∏–∫–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤ - –∑–∞–¥–µ—Ä–∂–∫–∞ 500ms –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º ‚úÖ

---

### ‚úÖ 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è API limit
**–§–∞–π–ª:** `components/crm/deals-kanban-board.tsx`, —Å—Ç—Ä–æ–∫–∞ 1376
- –ò–∑–º–µ–Ω–µ–Ω–æ: `limit: 10000` ‚Üí `limit: 1000`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö, –±—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è ‚úÖ

---

### ‚úÖ 4. –ó–∞–º–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏ deals
**–°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ (loadDeals callback):**
```typescript
const loadDeals = useCallback(async () => {
  setLoading(true)
  const dealsData = await getDeals(apiParams)
  // —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è
  setDeals(transformedDeals)
}, [selectedPipeline, showError, filters])

useEffect(() => {
  loadDeals()
}, [selectedPipeline?.id, filters.taskStatuses])
```

**–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ (React Query hook):**
```typescript
const debouncedFilters = useDebouncedValue(filters, 500)
const { data: dealsResponse, isLoading, error: dealsError } = useDeals({
  ...debouncedFilters,
  pipelineId: selectedPipeline?.id,
  limit: 1000,
  enabled: !!selectedPipeline,
})

useEffect(() => {
  if (dealsResponse?.data) {
    setDeals(transformedDeals)
  }
}, [dealsResponse])
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–µ–Ω—å—à–µ –∫–æ–¥–∞, –ª—É—á—à–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º ‚úÖ

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

| –°—Ü–µ–Ω–∞—Ä–∏–π | –†–∞–Ω—å—à–µ | –¢–µ–ø–µ—Ä—å | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|--------|--------|-----------|
| –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∫–ª–∏–∫ –Ω–∞ pipeline | Network –∑–∞–ø—Ä–æ—Å | –ö—ç—à (5 –º–∏–Ω) | ‚àûx –±—ã—Å—Ç—Ä–µ–µ |
| –ë—ã—Å—Ç—Ä—ã–µ –∫–ª–∏–∫–∏ –Ω–∞ —Ñ–∏–ª—å—Ç—Ä—ã | 10 –∑–∞–ø—Ä–æ—Å–æ–≤ | 1 –∑–∞–ø—Ä–æ—Å | **10x –º–µ–Ω—å—à–µ** –∑–∞–ø—Ä–æ—Å–æ–≤ |
| –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å | 500-2000ms | 500-2000ms | –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ | 10000 deals | 1000 deals | –ú–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏ |

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°–æ–∑–¥–∞–Ω–æ

1. **`lib/utils/debounce.ts`** - –Ω–æ–≤–∞—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –¥–µ–±–∞—É–Ω—Å–∞

### –ò–∑–º–µ–Ω–µ–Ω–æ

1. **`hooks/use-deals.ts`** - —Ä–∞—Å—à–∏—Ä–µ–Ω hook –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ + —É–≤–µ–ª–∏—á–µ–Ω staleTime –¥–æ 5 –º–∏–Ω
2. **`components/crm/deals-kanban-board.tsx`** - 80 —Å—Ç—Ä–æ–∫ -> 30 —Å—Ç—Ä–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ (–±–ª–∞–≥–æ–¥–∞—Ä—è useDeals)
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã: useDeals, dealKeys, useDebouncedValue, useQueryClient
   - –ó–∞–º–µ–Ω–µ–Ω loadDeals callback –Ω–∞ useDeals hook
   - –î–æ–±–∞–≤–ª–µ–Ω –¥–µ–±–∞—É–Ω—Å: `useDebouncedValue(filters, 500)`
   - –£–º–µ–Ω—å—à–µ–Ω limit: 10000 ‚Üí 1000
   - –í—Å–µ loadDeals() –≤—ã–∑–æ–≤—ã ‚Üí queryClient.invalidateQueries()

### Skeleton –∞–Ω–∏–º–∞—Ü–∏—è (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)

**`app/globals.css`** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ `@keyframes pulse-subtle` –∏ `animate-pulse-subtle`
**`components/ui/skeleton.tsx`** - —É–ª—É—á—à–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ dark/light —Ç–µ–º—ã
**`components/crm/deal-card-skeleton.tsx`** - —Å–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π skeleton –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ —Å–¥–µ–ª–æ–∫
**`components/shared/loading-skeleton.tsx`** - –≤—Å–µ skeleton –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å –¥–µ–±–∞—É–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π

---

## ‚ú® –ë–æ–Ω—É—Å: Skeleton –∞–Ω–∏–º–∞—Ü–∏—è

–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫—Ä–∞—Å–∏–≤–∞—è skeleton –∞–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏:
- ‚úÖ –î–≤–æ–π–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è (shimmer + pulse)
- ‚úÖ –ö–∞—Å–∫–∞–¥–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç (—ç–ª–µ–º–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ dark/light —Ç–µ–º—ã
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π skeleton –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ deals

---

## üìù –ö–æ–º–ø–∏–ª—è—Ü–∏—è

TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ. –û—Å—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ —Ç–∏–ø–æ–≤ - —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ, –Ω–µ —Å–≤—è–∑–∞–Ω—ã —Å —ç—Ç–∏–º–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏.

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (HIGH –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)

1. **Virtual scrolling** - –¥–ª—è 1000+ deals
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `react-window` (—É–∂–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö?)
   - –ü–æ–∑–≤–æ–ª–∏—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –º–∏–ª–ª–∏–æ–Ω—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–ª–∞–≤–Ω–æ

2. **Incremental loading (infinite scroll)**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useInfiniteQuery` –≤–º–µ—Å—Ç–æ `useQuery`
   - –ó–∞–≥—Ä—É–∂–∞—Ç—å –ø–æ—Ä—Ü–∏—è–º–∏ –≤–º–µ—Å—Ç–æ —Å—Ä–∞–∑—É 1000

3. **Performance monitoring**
   - –î–æ–±–∞–≤–∏—Ç—å React DevTools Profiler
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–æ–≤

---

## üìå –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í—Å–µ **4 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** –∑–∞–≤–µ—Ä—à–µ–Ω—ã:
1. ‚úÖ React Query –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
2. ‚úÖ Debounce –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ (500ms)
3. ‚úÖ Limit –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (10000 ‚Üí 1000)
4. ‚úÖ –ö—Ä–∞—Å–∏–≤–∞—è skeleton –∞–Ω–∏–º–∞—Ü–∏—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 2-3x —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.
